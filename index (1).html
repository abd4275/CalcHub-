<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CalcHub - Ultimate Multi-Calculator Platform</title>
    <meta name="description" content="50+ specialized calculators for finance, health, fitness, time management, and more">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #7209b7;
            --accent: #4cc9f0;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #f44336;
            --gray-100: #f8f9fa;
            --gray-200: #e9ecef;
            --gray-300: #dee2e6;
            --gray-700: #495057;
            --gray-800: #343a40;
            --gray-900: #212529;
            --card-shadow: 0 4px 20px rgba(0,0,0,0.08);
            --transition: all 0.3s ease;
        }

        .dark-mode {
            --light: #121826;
            --dark: #f8f9fa;
            --gray-100: #1e293b;
            --gray-200: #334155;
            --gray-300: #475569;
            --gray-700: #cbd5e1;
            --gray-800: #e2e8f0;
            --gray-900: #f1f5f9;
            --card-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
            transition: var(--transition);
            position: relative;
            min-height: 100vh;
            padding-bottom: 60px; /* Reduced padding for simplified footer */
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background-color: var(--light);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
            transition: var(--transition);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
        }

        .logo i {
            color: var(--secondary);
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 30px;
        }

        nav a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: var(--transition);
            position: relative;
        }

        nav a:hover {
            color: var(--primary);
        }

        nav a:after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: var(--transition);
        }

        nav a:hover:after {
            width: 100%;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .theme-toggle {
            background: var(--gray-200);
            border-radius: 30px;
            width: 50px;
            height: 26px;
            position: relative;
            cursor: pointer;
            display: flex;
            align-items: center;
            padding: 0 3px;
        }

        .theme-toggle:before {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: white;
            transition: transform 0.3s ease;
        }

        .dark-mode .theme-toggle:before {
            transform: translateX(24px);
        }

        .search-container {
            position: relative;
        }

        .search-container input {
            padding: 10px 15px 10px 40px;
            border-radius: 30px;
            border: 1px solid var(--gray-300);
            background: var(--light);
            color: var(--dark);
            width: 200px;
            transition: var(--transition);
        }

        .search-container input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
            width: 250px;
        }

        .search-container i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray-700);
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--dark);
            cursor: pointer;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 80px 0;
            text-align: center;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            line-height: 1.2;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 30px;
            opacity: 0.9;
        }

        .hero-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }

        .btn {
            display: inline-block;
            padding: 12px 28px;
            border-radius: 30px;
            font-weight: 500;
            text-decoration: none;
            transition: var(--transition);
            cursor: pointer;
            border: none;
            font-size: 1rem;
        }

        .btn-primary {
            background: white;
            color: var(--primary);
        }

        .btn-primary:hover {
            background: rgba(255,255,255,0.9);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .btn-secondary {
            background: transparent;
            border: 2px solid rgba(255,255,255,0.5);
            color: white;
        }

        .btn-secondary:hover {
            background: rgba(255,255,255,0.1);
            transform: translateY(-2px);
        }

        /* Calculator Categories */
        .section-title {
            text-align: center;
            margin: 60px 0 40px;
            position: relative;
        }

        .section-title h2 {
            font-size: 2.2rem;
            display: inline-block;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 15px;
        }

        .section-title p {
            max-width: 700px;
            margin: 0 auto;
            color: var(--gray-700);
        }

        .categories {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 60px;
        }

        .category-card {
            background: var(--light);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
        }

        .category-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }

        .category-icon {
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .category-content {
            padding: 25px;
        }

        .category-content h3 {
            margin-bottom: 15px;
            font-size: 1.4rem;
        }

        .calculator-list {
            list-style: none;
        }

        .calculator-list li {
            padding: 8px 0;
            border-bottom: 1px solid var(--gray-200);
        }

        .calculator-list li:last-child {
            border-bottom: none;
        }

        .calculator-list a {
            text-decoration: none;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
            transition: var(--transition);
        }

        .calculator-list a:hover {
            color: var(--primary);
        }

        .calculator-list i {
            color: var(--primary);
            font-size: 0.9rem;
        }

        /* Features Section */
        .features {
            background: var(--gray-100);
            padding: 80px 0;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .feature-card {
            background: var(--light);
            border-radius: 15px;
            padding: 35px 30px;
            box-shadow: var(--card-shadow);
            text-align: center;
            transition: var(--transition);
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-icon {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 1.8rem;
            color: white;
        }

        .feature-card h3 {
            margin-bottom: 15px;
            font-size: 1.4rem;
        }

        /* Calculator Content */
        .calculator-container {
            display: none;
            max-width: 800px;
            margin: 40px auto;
            background: var(--light);
            border-radius: 15px;
            box-shadow: var(--card-shadow);
            padding: 30px;
        }

        .calculator-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--gray-200);
            padding-bottom: 20px;
        }

        .calculator-header h2 {
            font-size: 1.8rem;
            color: var(--primary);
        }

        .close-calculator {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray-700);
            transition: var(--transition);
        }

        .close-calculator:hover {
            color: var(--danger);
        }

        .calculator-form {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            font-weight: 500;
        }

        .form-group input, .form-group select, .form-group textarea {
            padding: 12px 15px;
            border-radius: 8px;
            border: 1px solid var(--gray-300);
            background: var(--light);
            color: var(--dark);
            font-size: 1rem;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }

        .calculate-btn {
            background: var(--primary);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 10px;
        }

        .calculate-btn:hover {
            background: var(--primary-dark);
        }

        .calculator-result {
            background: var(--gray-100);
            padding: 25px;
            border-radius: 10px;
            margin-top: 30px;
            display: none;
        }

        .calculator-result h3 {
            margin-bottom: 15px;
            color: var(--primary);
        }

        .result-value {
            font-size: 1.8rem;
            font-weight: 700;
            margin: 10px 0;
            color: var(--secondary);
        }

        .result-description {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--gray-300);
        }

        /* Footer - Simplified */
        footer {
            background: var(--gray-800);
            color: var(--gray-200);
            padding: 20px 0; /* Reduced padding */
            position: absolute;
            bottom: 0;
            width: 100%;
            text-align: center; /* Center align content */
        }

        .footer-bottom {
            padding: 20px 0;
        }

        .footer-bottom p {
            font-size: 0.9rem;
            color: var(--gray-500);
            margin: 0; /* Remove default margins */
        }

        /* Modal for Legal Pages */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: var(--light);
            border-radius: 15px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 30px;
            position: relative;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray-700);
            transition: var(--transition);
        }

        .close-modal:hover {
            color: var(--danger);
        }

        .modal-content h2 {
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--gray-200);
        }

        .modal-content p {
            margin-bottom: 15px;
            line-height: 1.8;
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            .hero h1 {
                font-size: 2.5rem;
            }
            
            nav ul {
                gap: 20px;
            }
        }

        @media (max-width: 768px) {
            .mobile-menu-btn {
                display: block;
            }
            
            nav ul {
                position: fixed;
                top: 70px;
                left: 0;
                right: 0;
                background: var(--light);
                flex-direction: column;
                padding: 20px;
                box-shadow: 0 10px 10px rgba(0,0,0,0.1);
                gap: 10px;
                transform: translateY(-150%);
                transition: transform 0.3s ease;
            }
            
            nav ul.active {
                transform: translateY(0);
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .search-container input {
                width: 150px;
            }
            
            .search-container input:focus {
                width: 180px;
            }
        }

        @media (max-width: 576px) {
            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .header-container {
                flex-wrap: wrap;
            }
            
            .search-container {
                order: 3;
                width: 100%;
                margin-top: 15px;
            }
            
            .search-container input {
                width: 100%;
            }
            
            .search-container input:focus {
                width: 100%;
            }
            
            .modal-content {
                padding: 20px 15px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-container">
            <a href="#" class="logo" onclick="showHome()">
                <i class="fas fa-calculator"></i>
                <span>CalcHub</span>
            </a>
            
            <nav>
                <button class="mobile-menu-btn">
                    <i class="fas fa-bars"></i>
                </button>
                <ul>
                    <li><a href="#" onclick="showHome()"><i class="fas fa-home"></i> Home</a></li>
                    <li><a href="#" onclick="showCategory('health')"><i class="fas fa-heartbeat"></i> Health</a></li>
                    <li><a href="#" onclick="showCategory('finance')"><i class="fas fa-coins"></i> Finance</a></li>
                    <li><a href="#" onclick="showCategory('time')"><i class="fas fa-clock"></i> Time & Date</a></li>
                    <li><a href="#" onclick="showCategory('productivity')"><i class="fas fa-chart-line"></i> Productivity</a></li>
                    <li><a href="#" onclick="showCategory('education')"><i class="fas fa-book"></i> Education</a></li>
                </ul>
            </nav>
            
            <div class="header-actions">
                <div class="search-container">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search calculators...">
                </div>
                <div class="theme-toggle"></div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="hero-section">
        <div class="container">
            <h1>Your All-in-One Calculator Platform</h1>
            <p>Access 30+ specialized calculators for health, finance, time management, fitness, and more. Accurate, free, and easy to use.</p>
            
            <div class="hero-buttons">
                <a href="#" class="btn btn-primary" onclick="showCategory('all')"><i class="fas fa-calculator"></i> Explore Calculators</a>
                <a href="https://ko-fi.com/calchub" target="_blank" class="btn btn-secondary"><i class="fas fa-star"></i> Premium Features ($5)</a>
            </div>
        </div>
    </section>

    <!-- Calculator Categories -->
    <section class="container" id="categories-section">
        <div class="section-title">
            <h2>Calculator Categories</h2>
            <p>Browse our collection of specialized calculators designed to simplify your life</p>
        </div>
        
        <div class="categories">
            <!-- Daily Life Calculators -->
            <div class="category-card" data-category="daily">
                <div class="category-icon">
                    <i class="fas fa-heartbeat"></i>
                </div>
                <div class="category-content">
                    <h3>Daily Life</h3>
                    <ul class="calculator-list">
                        <li><a href="#" onclick="openCalculator('sleep')"><i class="fas fa-bed"></i> Sleep Calculator</a></li>
                        <li><a href="#" onclick="openCalculator('age')"><i class="fas fa-birthday-cake"></i> Age Calculator</a></li>
                        <li><a href="#" onclick="openCalculator('bmi')"><i class="fas fa-weight"></i> BMI Calculator</a></li>
                        <li><a href="#" onclick="openCalculator('bmr')"><i class="fas fa-fire"></i> BMR Calculator</a></li>
                        <li><a href="#" onclick="openCalculator('calorie')"><i class="fas fa-apple-alt"></i> Calorie Calculator</a></li>
                    </ul>
                </div>
            </div>
            
            <!-- Finance Calculators -->
            <div class="category-card" data-category="finance">
                <div class="category-icon">
                    <i class="fas fa-coins"></i>
                </div>
                <div class="category-content">
                    <h3>Finance & Money</h3>
                    <ul class="calculator-list">
                        <li><a href="#" onclick="openCalculator('loan')"><i class="fas fa-file-invoice-dollar"></i> Loan Calculator</a></li>
                        <li><a href="#" onclick="openCalculator('emi')"><i class="fas fa-calculator"></i> EMI Calculator</a></li>
                        <li><a href="#" onclick="openCalculator('interest')"><i class="fas fa-percent"></i> Interest Calculator</a></li>
                        <li><a href="#" onclick="openCalculator('sip')"><i class="fas fa-chart-line"></i> SIP Calculator</a></li>
                        <li><a href="#" onclick="openCalculator('tax')"><i class="fas fa-receipt"></i> Tax Calculator</a></li>
                    </ul>
                </div>
            </div>
            
            <!-- Fitness & Health Calculators -->
            <div class="category-card" data-category="health">
                <div class="category-icon">
                    <i class="fas fa-running"></i>
                </div>
                <div class="category-content">
                    <h3>Fitness & Health</h3>
                    <ul class="calculator-list">
                        <li><a href="#" onclick="openCalculator('tdee')"><i class="fas fa-burn"></i> TDEE Calculator</a></li>
                        <li><a href="#" onclick="openCalculator('heart')"><i class="fas fa-heart"></i> Heart Rate Calculator</a></li>
                        <li><a href="#" onclick="openCalculator('bsa')"><i class="fas fa-ruler"></i> Body Surface Area</a></li>
                        <li><a href="#" onclick="openCalculator('lean')"><i class="fas fa-dumbbell"></i> Lean Body Mass</a></li>
                        <li><a href="#" onclick="openCalculator('pregnancy')"><i class="fas fa-baby"></i> Pregnancy Due Date</a></li>
                    </ul>
                </div>
            </div>
            
            <!-- Math & School Tools -->
            <div class="category-card" data-category="education">
                <div class="category-icon">
                    <i class="fas fa-calculator"></i>
                </div>
                <div class="category-content">
                    <h3>Math & Education</h3>
                    <ul class="calculator-list">
                        <li><a href="#" onclick="openCalculator('percentage')"><i class="fas fa-percentage"></i> Percentage Calculator</a></li>
                        <li><a href="#" onclick="openCalculator('ratio')"><i class="fas fa-divide"></i> Ratio Calculator</a></li>
                        <li><a href="#" onclick="openCalculator('fraction')"><i class="fas fa-fraction"></i> Fraction Calculator</a></li>
                        <li><a href="#" onclick="openCalculator('average')"><i class="fas fa-sort-numeric-up"></i> Average Calculator</a></li>
                        <li><a href="#" onclick="openCalculator('gpa')"><i class="fas fa-graduation-cap"></i> GPA Calculator</a></li>
                    </ul>
                </div>
            </div>
            
            <!-- Time & Date Calculators -->
            <div class="category-card" data-category="time">
                <div class="category-icon">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="category-content">
                    <h3>Time & Date</h3>
                    <ul class="calculator-list">
                        <li><a href="#" onclick="openCalculator('date')"><i class="fas fa-calendar"></i> Date Calculator</a></li>
                        <li><a href="#" onclick="openCalculator('duration')"><i class="fas fa-stopwatch"></i> Time Duration</a></li>
                        <li><a href="#" onclick="openCalculator('countdown')"><i class="fas fa-hourglass-half"></i> Countdown Timer</a></li>
                        <li><a href="#" onclick="openCalculator('worldclock')"><i class="fas fa-globe-americas"></i> World Clock</a></li>
                        <li><a href="#" onclick="openCalculator('retirement')"><i class="fas fa-user-clock"></i> Retirement Calculator</a></li>
                    </ul>
                </div>
            </div>
            
            <!-- Productivity & Business -->
            <div class="category-card" data-category="productivity">
                <div class="category-icon">
                    <i class="fas fa-briefcase"></i>
                </div>
                <div class="category-content">
                    <h3>Productivity & Business</h3>
                    <ul class="calculator-list">
                        <li><a href="#" onclick="openCalculator('roi')"><i class="fas fa-chart-pie"></i> ROI Calculator</a></li>
                        <li><a href="#" onclick="openCalculator('cpm')"><i class="fas fa-ad"></i> CPM Calculator</a></li>
                        <li><a href="#" onclick="openCalculator('cpc')"><i class="fas fa-mouse-pointer"></i> CPC Calculator</a></li>
                        <li><a href="#" onclick="openCalculator('breakeven')"><i class="fas fa-balance-scale"></i> Break-even Calculator</a></li>
                        <li><a href="#" onclick="openCalculator('invoice')"><i class="fas fa-file-invoice"></i> Invoice Generator</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features" id="features-section">
        <div class="container">
            <div class="section-title">
                <h2>Powerful Features</h2>
                <p>Enhancing your experience with advanced functionality</p>
            </div>
            
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <h3>AI Assistant</h3>
                    <p>Our smart assistant helps you find the right calculator and provides personalized insights.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <h3>Mobile App Experience</h3>
                    <p>Install as a PWA for offline access and app-like experience on your device.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-file-pdf"></i>
                    </div>
                    <h3>Export Results</h3>
                    <p>Save or share your calculations as PDF, image, or text with one click.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-bell"></i>
                    </div>
                    <h3>Reminders & Alerts</h3>
                    <p>Set reminders for sleep, water intake, payments, and other important events.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-language"></i>
                    </div>
                    <h3>Multi-Language</h3>
                    <p>Use the platform in English, Spanish, Hindi, and other languages.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <h3>Personal Dashboard</h3>
                    <p>Track your progress over time with personalized analytics and reports.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Calculator Container -->
    <div class="container calculator-container" id="calculator-container">
        <div class="calculator-header">
            <h2 id="calculator-title">Calculator</h2>
            <button class="close-calculator" onclick="showHome()">&times;</button>
        </div>
        
        <div id="calculator-content">
            <!-- Calculator content will be loaded here -->
        </div>
    </div>

    <!-- Footer - Simplified -->
    <footer>
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2023 CalcHub. All rights reserved. | Designed with <i class="fas fa-heart" style="color: var(--danger)"></i> for your convenience</p>
            </div>
        </div>
    </footer>

    <!-- Modal for Legal Pages -->
    <div class="modal" id="legal-modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeLegal()">&times;</span>
            <h2 id="legal-title">Legal Page</h2>
            <div id="legal-content">
                <!-- Legal content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Resources Modal -->
    <div class="modal" id="resource-modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeResourceModal()">&times;</span>
            <h2 id="resource-title">Resource</h2>
            <div id="resource-content">
                <!-- Resource content will be loaded here -->
            </div>
        </div>
    </div>

    <script>
        // Theme Toggle Functionality
        const themeToggle = document.querySelector('.theme-toggle');
        const body = document.body;
        
        // Check for saved theme preference
        if (localStorage.getItem('theme') === 'dark') {
            body.classList.add('dark-mode');
        }
        
        themeToggle.addEventListener('click', () => {
            body.classList.toggle('dark-mode');
            
            // Save user preference
            if (body.classList.contains('dark-mode')) {
                localStorage.setItem('theme', 'dark');
            } else {
                localStorage.setItem('theme', 'light');
            }
        });
        
        // Mobile Menu Toggle
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const navMenu = document.querySelector('nav ul');
        
        mobileMenuBtn.addEventListener('click', () => {
            navMenu.classList.toggle('active');
            mobileMenuBtn.innerHTML = navMenu.classList.contains('active') ? 
                '<i class="fas fa-times"></i>' : '<i class="fas fa-bars"></i>';
        });
        
        // Close mobile menu when clicking a link
        document.querySelectorAll('nav a').forEach(link => {
            link.addEventListener('click', () => {
                navMenu.classList.remove('active');
                mobileMenuBtn.innerHTML = '<i class="fas fa-bars"></i>';
            });
        });
        
        // Show home page
        function showHome() {
            document.getElementById('hero-section').style.display = 'block';
            document.getElementById('categories-section').style.display = 'block';
            document.getElementById('features-section').style.display = 'block';
            document.getElementById('calculator-container').style.display = 'none';
            
            // Show all categories
            document.querySelectorAll('.category-card').forEach(card => {
                card.style.display = 'block';
            });
            
            return false;
        }
        
        // Show specific calculator category
        function showCategory(category) {
            document.getElementById('hero-section').style.display = 'none';
            document.getElementById('categories-section').style.display = 'block';
            document.getElementById('features-section').style.display = 'none';
            document.getElementById('calculator-container').style.display = 'none';
            
            // Hide all categories first
            document.querySelectorAll('.category-card').forEach(card => {
                card.style.display = 'none';
            });
            
            // Show only the selected category
            if (category === 'all') {
                document.querySelectorAll('.category-card').forEach(card => {
                    card.style.display = 'block';
                });
            } else {
                document.querySelectorAll(`.category-card[data-category="${category}"]`).forEach(card => {
                    card.style.display = 'block';
                });
            }
            
            // Scroll to categories
            document.getElementById('categories-section').scrollIntoView({behavior: 'smooth'});
            return false;
        }
        
        // Open specific calculator
        function openCalculator(calculatorId) {
            // Hide other sections
            document.getElementById('hero-section').style.display = 'none';
            document.getElementById('categories-section').style.display = 'none';
            document.getElementById('features-section').style.display = 'none';
            
            // Show calculator container
            const calculatorContainer = document.getElementById('calculator-container');
            calculatorContainer.style.display = 'block';
            
            // Set calculator title
            const titles = {
                'sleep': 'Sleep Calculator',
                'age': 'Age Calculator',
                'bmi': 'BMI Calculator',
                'bmr': 'BMR Calculator',
                'calorie': 'Calorie Calculator',
                'loan': 'Loan Calculator',
                'emi': 'EMI Calculator',
                'interest': 'Interest Calculator',
                'sip': 'SIP Calculator',
                'tax': 'Tax Calculator',
                'tdee': 'TDEE Calculator',
                'heart': 'Heart Rate Calculator',
                'bsa': 'Body Surface Area Calculator',
                'lean': 'Lean Body Mass Calculator',
                'pregnancy': 'Pregnancy Due Date Calculator',
                'percentage': 'Percentage Calculator',
                'ratio': 'Ratio Calculator',
                'fraction': 'Fraction Calculator',
                'average': 'Average Calculator',
                'gpa': 'GPA Calculator',
                'date': 'Date Calculator',
                'duration': 'Time Duration Calculator',
                'countdown': 'Countdown Timer',
                'worldclock': 'World Clock',
                'retirement': 'Retirement Calculator',
                'roi': 'ROI Calculator',
                'cpm': 'CPM Calculator',
                'cpc': 'CPC Calculator',
                'breakeven': 'Break-even Calculator',
                'invoice': 'Invoice Generator'
            };
            
            document.getElementById('calculator-title').textContent = titles[calculatorId] || 'Calculator';
            
            // Load calculator content
            const calculatorContent = document.getElementById('calculator-content');
            calculatorContent.innerHTML = generateCalculatorContent(calculatorId);
            
            // Scroll to calculator
            calculatorContainer.scrollIntoView({behavior: 'smooth'});
            
            return false;
        }
        
        // Generate calculator content based on ID
        function generateCalculatorContent(calculatorId) {
            let content = '';
            
            switch(calculatorId) {
                case 'bmi':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="height">Height (cm)</label>
                                <input type="number" id="height" placeholder="Enter your height">
                            </div>
                            <div class="form-group">
                                <label for="weight">Weight (kg)</label>
                                <input type="number" id="weight" placeholder="Enter your weight">
                            </div>
                            <button class="calculate-btn" onclick="calculateBMI()">Calculate BMI</button>
                        </div>
                        <div class="calculator-result" id="bmi-result">
                            <h3>Your BMI Result</h3>
                            <div class="result-value" id="bmi-value">0</div>
                            <div id="bmi-category">-</div>
                            <div class="result-description">
                                <p>BMI Categories:</p>
                                <ul>
                                    <li>Underweight = &lt;18.5</li>
                                    <li>Normal weight = 18.5–24.9</li>
                                    <li>Overweight = 25–29.9</li>
                                    <li>Obesity = BMI of 30 or greater</li>
                                </ul>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'age':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="birthdate">Date of Birth</label>
                                <input type="date" id="birthdate">
                            </div>
                            <button class="calculate-btn" onclick="calculateAge()">Calculate Age</button>
                        </div>
                        <div class="calculator-result" id="age-result">
                            <h3>Your Age</h3>
                            <div class="result-value" id="age-value">0 years</div>
                            <div class="result-description">
                                <p>Your age in different units:</p>
                                <div id="age-details">-</div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'loan':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="loan-amount">Loan Amount ($)</label>
                                <input type="number" id="loan-amount" placeholder="Enter loan amount">
                            </div>
                            <div class="form-group">
                                <label for="interest-rate">Interest Rate (%)</label>
                                <input type="number" id="interest-rate" placeholder="Enter interest rate" step="0.01">
                            </div>
                            <div class="form-group">
                                <label for="loan-term">Loan Term (years)</label>
                                <input type="number" id="loan-term" placeholder="Enter loan term">
                            </div>
                            <button class="calculate-btn" onclick="calculateLoan()">Calculate Loan</button>
                        </div>
                        <div class="calculator-result" id="loan-result">
                            <h3>Loan Calculation</h3>
                            <div class="result-value" id="monthly-payment">$0.00</div>
                            <div class="result-description">
                                <p>Total Payment: <span id="total-payment">$0.00</span></p>
                                <p>Total Interest: <span id="total-interest">$0.00</span></p>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'sleep':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="wake-up-time">When do you want to wake up?</label>
                                <input type="time" id="wake-up-time" value="07:00">
                            </div>
                            <div class="form-group">
                                <label for="sleep-cycles">How many sleep cycles (1.5h each)?</label>
                                <select id="sleep-cycles">
                                    <option value="5">5 cycles (7.5 hours)</option>
                                    <option value="6" selected>6 cycles (9 hours)</option>
                                    <option value="4">4 cycles (6 hours)</option>
                                </select>
                            </div>
                            <button class="calculate-btn" onclick="calculateSleep()">Calculate Bedtime</button>
                        </div>
                        <div class="calculator-result" id="sleep-result">
                            <h3>Sleep Schedule</h3>
                            <div class="result-value" id="sleep-time">-</div>
                            <div class="result-description">
                                <p>For optimal sleep, try to go to bed at one of these times:</p>
                                <div id="sleep-times">-</div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'bmr':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="bmr-gender">Gender</label>
                                <select id="bmr-gender">
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="bmr-age">Age (years)</label>
                                <input type="number" id="bmr-age" placeholder="Enter your age">
                            </div>
                            <div class="form-group">
                                <label for="bmr-height">Height (cm)</label>
                                <input type="number" id="bmr-height" placeholder="Enter your height">
                            </div>
                            <div class="form-group">
                                <label for="bmr-weight">Weight (kg)</label>
                                <input type="number" id="bmr-weight" placeholder="Enter your weight">
                            </div>
                            <button class="calculate-btn" onclick="calculateBMR()">Calculate BMR</button>
                        </div>
                        <div class="calculator-result" id="bmr-result">
                            <h3>Basal Metabolic Rate</h3>
                            <div class="result-value" id="bmr-value">0</div>
                            <div class="result-description">
                                <p>Your BMR is the number of calories your body needs at complete rest.</p>
                                <p>Activity level multipliers:</p>
                                <ul>
                                    <li>Sedentary: BMR × 1.2</li>
                                    <li>Light exercise: BMR × 1.375</li>
                                    <li>Moderate exercise: BMR × 1.55</li>
                                    <li>Heavy exercise: BMR × 1.725</li>
                                    <li>Athlete: BMR × 1.9</li>
                                </ul>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'calorie':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="calorie-gender">Gender</label>
                                <select id="calorie-gender">
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="calorie-age">Age (years)</label>
                                <input type="number" id="calorie-age" placeholder="Enter your age">
                            </div>
                            <div class="form-group">
                                <label for="calorie-height">Height (cm)</label>
                                <input type="number" id="calorie-height" placeholder="Enter your height">
                            </div>
                            <div class="form-group">
                                <label for="calorie-weight">Weight (kg)</label>
                                <input type="number" id="calorie-weight" placeholder="Enter your weight">
                            </div>
                            <div class="form-group">
                                <label for="calorie-activity">Activity Level</label>
                                <select id="calorie-activity">
                                    <option value="1.2">Sedentary (little or no exercise)</option>
                                    <option value="1.375">Lightly active (light exercise 1-3 days/week)</option>
                                    <option value="1.55">Moderately active (moderate exercise 3-5 days/week)</option>
                                    <option value="1.725">Very active (hard exercise 6-7 days/week)</option>
                                    <option value="1.9">Extra active (very hard exercise & physical job)</option>
                                </select>
                            </div>
                            <button class="calculate-btn" onclick="calculateCalorie()">Calculate Calories</button>
                        </div>
                        <div class="calculator-result" id="calorie-result">
                            <h3>Daily Calorie Needs</h3>
                            <div class="result-value" id="calorie-value">0</div>
                            <div class="result-description">
                                <p>This is the estimated number of calories you need to maintain your current weight.</p>
                                <p>To lose weight: Reduce by 500 calories/day (about 0.5kg/week)</p>
                                <p>To gain weight: Increase by 500 calories/day</p>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'emi':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="emi-amount">Loan Amount ($)</label>
                                <input type="number" id="emi-amount" placeholder="Enter loan amount">
                            </div>
                            <div class="form-group">
                                <label for="emi-rate">Interest Rate (%)</label>
                                <input type="number" id="emi-rate" placeholder="Enter interest rate" step="0.01">
                            </div>
                            <div class="form-group">
                                <label for="emi-term">Loan Term (months)</label>
                                <input type="number" id="emi-term" placeholder="Enter loan term in months">
                            </div>
                            <button class="calculate-btn" onclick="calculateEMI()">Calculate EMI</button>
                        </div>
                        <div class="calculator-result" id="emi-result">
                            <h3>EMI Calculation</h3>
                            <div class="result-value" id="emi-value">$0.00</div>
                            <div class="result-description">
                                <p>Total Payment: <span id="emi-total">$0.00</span></p>
                                <p>Total Interest: <span id="emi-interest">$0.00</span></p>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'interest':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="interest-principal">Principal Amount ($)</label>
                                <input type="number" id="interest-principal" placeholder="Enter principal amount">
                            </div>
                            <div class="form-group">
                                <label for="interest-rate">Interest Rate (%)</label>
                                <input type="number" id="interest-rate" placeholder="Enter interest rate" step="0.01">
                            </div>
                            <div class="form-group">
                                <label for="interest-time">Time Period</label>
                                <div style="display: flex; gap: 10px;">
                                    <input type="number" id="interest-time" placeholder="Enter time" style="flex: 1;">
                                    <select id="interest-unit" style="flex: 1;">
                                        <option value="days">Days</option>
                                        <option value="months">Months</option>
                                        <option value="years" selected>Years</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="interest-type">Interest Type</label>
                                <select id="interest-type">
                                    <option value="simple">Simple Interest</option>
                                    <option value="compound">Compound Interest</option>
                                </select>
                            </div>
                            <button class="calculate-btn" onclick="calculateInterest()">Calculate Interest</button>
                        </div>
                        <div class="calculator-result" id="interest-result">
                            <h3>Interest Calculation</h3>
                            <div class="result-value" id="interest-value">$0.00</div>
                            <div class="result-description">
                                <p>Total Amount: <span id="interest-total">$0.00</span></p>
                                <p>Interest Earned: <span id="interest-earned">$0.00</span></p>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'sip':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="sip-amount">Monthly Investment ($)</label>
                                <input type="number" id="sip-amount" placeholder="Enter monthly amount">
                            </div>
                            <div class="form-group">
                                <label for="sip-rate">Expected Return Rate (%)</label>
                                <input type="number" id="sip-rate" placeholder="Enter expected return" step="0.01">
                            </div>
                            <div class="form-group">
                                <label for="sip-time">Investment Period (years)</label>
                                <input type="number" id="sip-time" placeholder="Enter time in years">
                            </div>
                            <button class="calculate-btn" onclick="calculateSIP()">Calculate SIP</button>
                        </div>
                        <div class="calculator-result" id="sip-result">
                            <h3>SIP Calculation</h3>
                            <div class="result-value" id="sip-value">$0.00</div>
                            <div class="result-description">
                                <p>Total Investment: <span id="sip-invested">$0.00</span></p>
                                <p>Estimated Returns: <span id="sip-returns">$0.00</span></p>
                                <p>Total Value: <span id="sip-total">$0.00</span></p>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'tax':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="tax-income">Annual Income ($)</label>
                                <input type="number" id="tax-income" placeholder="Enter your annual income">
                            </div>
                            <div class="form-group">
                                <label for="tax-regime">Tax Regime</label>
                                <select id="tax-regime">
                                    <option value="new">New Tax Regime</option>
                                    <option value="old">Old Tax Regime</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="tax-deductions">Deductions ($)</label>
                                <input type="number" id="tax-deductions" placeholder="Enter deductions if applicable">
                            </div>
                            <button class="calculate-btn" onclick="calculateTax()">Calculate Tax</button>
                        </div>
                        <div class="calculator-result" id="tax-result">
                            <h3>Tax Calculation</h3>
                            <div class="result-value" id="tax-value">$0.00</div>
                            <div class="result-description">
                                <p>Effective Tax Rate: <span id="tax-rate">0%</span></p>
                                <p>Post-Tax Income: <span id="tax-net">$0.00</span></p>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'tdee':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="tdee-gender">Gender</label>
                                <select id="tdee-gender">
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="tdee-age">Age (years)</label>
                                <input type="number" id="tdee-age" placeholder="Enter your age">
                            </div>
                            <div class="form-group">
                                <label for="tdee-height">Height (cm)</label>
                                <input type="number" id="tdee-height" placeholder="Enter your height">
                            </div>
                            <div class="form-group">
                                <label for="tdee-weight">Weight (kg)</label>
                                <input type="number" id="tdee-weight" placeholder="Enter your weight">
                            </div>
                            <div class="form-group">
                                <label for="tdee-activity">Activity Level</label>
                                <select id="tdee-activity">
                                    <option value="1.2">Sedentary (little or no exercise)</option>
                                    <option value="1.375">Lightly active (light exercise 1-3 days/week)</option>
                                    <option value="1.55">Moderately active (moderate exercise 3-5 days/week)</option>
                                    <option value="1.725">Very active (hard exercise 6-7 days/week)</option>
                                    <option value="1.9">Extra active (very hard exercise & physical job)</option>
                                </select>
                            </div>
                            <button class="calculate-btn" onclick="calculateTDEE()">Calculate TDEE</button>
                        </div>
                        <div class="calculator-result" id="tdee-result">
                            <h3>Total Daily Energy Expenditure</h3>
                            <div class="result-value" id="tdee-value">0</div>
                            <div class="result-description">
                                <p>Your TDEE is the total number of calories you burn each day including activity.</p>
                                <p>To lose weight: Consume 300-500 calories less than your TDEE</p>
                                <p>To gain weight: Consume 300-500 calories more than your TDEE</p>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'heart':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="heart-age">Age (years)</label>
                                <input type="number" id="heart-age" placeholder="Enter your age">
                            </div>
                            <div class="form-group">
                                <label for="heart-resting">Resting Heart Rate (bpm)</label>
                                <input type="number" id="heart-resting" placeholder="Enter resting heart rate">
                            </div>
                            <div class="form-group">
                                <label for="heart-intensity">Exercise Intensity</label>
                                <select id="heart-intensity">
                                    <option value="0.5">Light (50-60% of max)</option>
                                    <option value="0.6">Moderate (60-70% of max)</option>
                                    <option value="0.7">Weight Control (70-80% of max)</option>
                                    <option value="0.8">Aerobic (80-90% of max)</option>
                                    <option value="0.9">Anaerobic (90-100% of max)</option>
                                </select>
                            </div>
                            <button class="calculate-btn" onclick="calculateHeartRate()">Calculate Heart Rate Zones</button>
                        </div>
                        <div class="calculator-result" id="heart-result">
                            <h3>Heart Rate Zones</h3>
                            <div id="heart-zones">
                                <p>Maximum Heart Rate: <span id="heart-max">-</span> bpm</p>
                                <p>Target Heart Rate Zone: <span id="heart-target">-</span> bpm</p>
                            </div>
                            <div class="result-description">
                                <p>Heart rate zones:</p>
                                <ul>
                                    <li>Light: 50-60% of max - Warm-up, fat burning</li>
                                    <li>Moderate: 60-70% - Endurance training</li>
                                    <li>Weight Control: 70-80% - Aerobic fitness</li>
                                    <li>Aerobic: 80-90% - Anaerobic threshold</li>
                                    <li>Anaerobic: 90-100% - Maximum effort</li>
                                </ul>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'bsa':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="bsa-height">Height (cm)</label>
                                <input type="number" id="bsa-height" placeholder="Enter your height">
                            </div>
                            <div class="form-group">
                                <label for="bsa-weight">Weight (kg)</label>
                                <input type="number" id="bsa-weight" placeholder="Enter your weight">
                            </div>
                            <div class="form-group">
                                <label for="bsa-formula">Formula</label>
                                <select id="bsa-formula">
                                    <option value="mosteller">Mosteller</option>
                                    <option value="dubois">Du Bois</option>
                                    <option value="haycock">Haycock</option>
                                    <option value="gehan">Gehan & George</option>
                                </select>
                            </div>
                            <button class="calculate-btn" onclick="calculateBSA()">Calculate BSA</button>
                        </div>
                        <div class="calculator-result" id="bsa-result">
                            <h3>Body Surface Area</h3>
                            <div class="result-value" id="bsa-value">0 m²</div>
                            <div class="result-description">
                                <p>Body Surface Area (BSA) is used in many medical measurements including medication dosages.</p>
                                <p>Average BSA for adults: 1.7 m² (men), 1.6 m² (women)</p>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'lean':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="lean-gender">Gender</label>
                                <select id="lean-gender">
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="lean-weight">Weight (kg)</label>
                                <input type="number" id="lean-weight" placeholder="Enter your weight">
                            </div>
                            <div class="form-group">
                                <label for="lean-bodyfat">Body Fat Percentage</label>
                                <input type="number" id="lean-bodyfat" placeholder="Enter body fat %">
                            </div>
                            <button class="calculate-btn" onclick="calculateLeanMass()">Calculate Lean Mass</button>
                        </div>
                        <div class="calculator-result" id="lean-result">
                            <h3>Lean Body Mass</h3>
                            <div class="result-value" id="lean-value">0 kg</div>
                            <div class="result-description">
                                <p>Lean body mass includes muscles, bones, organs and water - everything except fat.</p>
                                <p>Average ranges:</p>
                                <ul>
                                    <li>Men: 70-90% of total weight</li>
                                    <li>Women: 60-85% of total weight</li>
                                </ul>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'pregnancy':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="pregnancy-lmp">First Day of Last Menstrual Period</label>
                                <input type="date" id="pregnancy-lmp">
                            </div>
                            <div class="form-group">
                                <label for="pregnancy-cycle">Average Cycle Length (days)</label>
                                <input type="number" id="pregnancy-cycle" value="28" min="21" max="45">
                            </div>
                            <button class="calculate-btn" onclick="calculatePregnancy()">Calculate Due Date</button>
                        </div>
                        <div class="calculator-result" id="pregnancy-result">
                            <h3>Pregnancy Due Date</h3>
                            <div class="result-value" id="pregnancy-duedate">-</div>
                            <div class="result-description">
                                <p>Key milestones:</p>
                                <ul>
                                    <li>First Trimester Ends: <span id="pregnancy-trimester1">-</span></li>
                                    <li>Second Trimester Ends: <span id="pregnancy-trimester2">-</span></li>
                                    <li>Current Week: <span id="pregnancy-currentweek">-</span></li>
                                </ul>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'percentage':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="percentage-what">What is</label>
                                <input type="number" id="percentage-x" placeholder="Enter number">
                            </div>
                            <div class="form-group">
                                <label for="percentage-of">% of</label>
                                <input type="number" id="percentage-y" placeholder="Enter number">
                            </div>
                            <button class="calculate-btn" onclick="calculatePercentage()">Calculate Percentage</button>
                        </div>
                        <div class="calculator-result" id="percentage-result">
                            <h3>Percentage Calculation</h3>
                            <div class="result-value" id="percentage-value">0%</div>
                            <div class="result-description">
                                <p>Other calculations:</p>
                                <ul>
                                    <li>X increased by Y%: <span id="percentage-increase">-</span></li>
                                    <li>X decreased by Y%: <span id="percentage-decrease">-</span></li>
                                    <li>Percentage change from X to Y: <span id="percentage-change">-</span></li>
                                </ul>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'ratio':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="ratio-a">Value A</label>
                                <input type="number" id="ratio-a" placeholder="Enter first value">
                            </div>
                            <div class="form-group">
                                <label for="ratio-b">Value B</label>
                                <input type="number" id="ratio-b" placeholder="Enter second value">
                            </div>
                            <button class="calculate-btn" onclick="calculateRatio()">Calculate Ratio</button>
                        </div>
                        <div class="calculator-result" id="ratio-result">
                            <h3>Ratio Calculation</h3>
                            <div class="result-value" id="ratio-value">0:0</div>
                            <div class="result-description">
                                <p>Simplified ratio: <span id="ratio-simplified">-</span></p>
                                <p>Ratio percentage: <span id="ratio-percentage">-</span></p>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'fraction':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="fraction-numerator">Numerator</label>
                                <input type="number" id="fraction-numerator" placeholder="Enter numerator">
                            </div>
                            <div class="form-group">
                                <label for="fraction-denominator">Denominator</label>
                                <input type="number" id="fraction-denominator" placeholder="Enter denominator">
                            </div>
                            <button class="calculate-btn" onclick="calculateFraction()">Calculate Fraction</button>
                        </div>
                        <div class="calculator-result" id="fraction-result">
                            <h3>Fraction Calculation</h3>
                            <div class="result-value" id="fraction-value">0/0</div>
                            <div class="result-description">
                                <p>Simplified fraction: <span id="fraction-simplified">-</span></p>
                                <p>Decimal equivalent: <span id="fraction-decimal">-</span></p>
                                <p>Percentage: <span id="fraction-percentage">-</span></p>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'average':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="average-values">Enter numbers (comma separated)</label>
                                <input type="text" id="average-values" placeholder="e.g. 5, 10, 15, 20">
                            </div>
                            <button class="calculate-btn" onclick="calculateAverage()">Calculate Average</button>
                        </div>
                        <div class="calculator-result" id="average-result">
                            <h3>Average Calculation</h3>
                            <div class="result-value" id="average-mean">0</div>
                            <div class="result-description">
                                <p>Median: <span id="average-median">-</span></p>
                                <p>Mode: <span id="average-mode">-</span></p>
                                <p>Range: <span id="average-range">-</span></p>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'gpa':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label>Add Courses</label>
                                <div id="gpa-courses">
                                    <div class="gpa-course" style="display: flex; gap: 10px; margin-bottom: 10px;">
                                        <input type="text" placeholder="Course name" class="gpa-name" style="flex: 2;">
                                        <input type="number" placeholder="Credits" class="gpa-credits" style="flex: 1;">
                                        <select class="gpa-grade" style="flex: 1;">
                                            <option value="4">A (4.0)</option>
                                            <option value="3.7">A- (3.7)</option>
                                            <option value="3.3">B+ (3.3)</option>
                                            <option value="3">B (3.0)</option>
                                            <option value="2.7">B- (2.7)</option>
                                            <option value="2.3">C+ (2.3)</option>
                                            <option value="2">C (2.0)</option>
                                            <option value="1.7">C- (1.7)</option>
                                            <option value="1.3">D+ (1.3)</option>
                                            <option value="1">D (1.0)</option>
                                            <option value="0">F (0.0)</option>
                                        </select>
                                    </div>
                                </div>
                                <button type="button" class="btn-secondary" style="padding: 5px 10px; font-size: 0.9rem;" onclick="addGpaCourse()">Add Course</button>
                            </div>
                            <button class="calculate-btn" onclick="calculateGPA()">Calculate GPA</button>
                        </div>
                        <div class="calculator-result" id="gpa-result">
                            <h3>GPA Calculation</h3>
                            <div class="result-value" id="gpa-value">0.00</div>
                            <div class="result-description">
                                <p>Total Credits: <span id="gpa-credits">0</span></p>
                                <p>Grade Points: <span id="gpa-points">0</span></p>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'date':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="date-start">Start Date</label>
                                <input type="date" id="date-start">
                            </div>
                            <div class="form-group">
                                <label for="date-end">End Date</label>
                                <input type="date" id="date-end">
                            </div>
                            <button class="calculate-btn" onclick="calculateDateDifference()">Calculate Difference</button>
                        </div>
                        <div class="calculator-result" id="date-result">
                            <h3>Date Calculation</h3>
                            <div class="result-value" id="date-difference">0 days</div>
                            <div class="result-description">
                                <p>Breakdown:</p>
                                <ul>
                                    <li>Years: <span id="date-years">0</span></li>
                                    <li>Months: <span id="date-months">0</span></li>
                                    <li>Weeks: <span id="date-weeks">0</span></li>
                                    <li>Days: <span id="date-days">0</span></li>
                                </ul>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'duration':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="duration-start">Start Time</label>
                                <input type="time" id="duration-start">
                            </div>
                            <div class="form-group">
                                <label for="duration-end">End Time</label>
                                <input type="time" id="duration-end">
                            </div>
                            <button class="calculate-btn" onclick="calculateDuration()">Calculate Duration</button>
                        </div>
                        <div class="calculator-result" id="duration-result">
                            <h3>Time Duration</h3>
                            <div class="result-value" id="duration-value">0 hours 0 minutes</div>
                            <div class="result-description">
                                <p>Total in different units:</p>
                                <ul>
                                    <li>Minutes: <span id="duration-minutes">0</span></li>
                                    <li>Seconds: <span id="duration-seconds">0</span></li>
                                    <li>Decimal Hours: <span id="duration-decimal">0</span></li>
                                </ul>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'countdown':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="countdown-date">Target Date</label>
                                <input type="datetime-local" id="countdown-date">
                            </div>
                            <button class="calculate-btn" onclick="startCountdown()">Start Countdown</button>
                        </div>
                        <div class="calculator-result" id="countdown-result">
                            <h3>Countdown Timer</h3>
                            <div class="result-value" id="countdown-value">00:00:00:00</div>
                            <div class="result-description">
                                <p>Time remaining until target date:</p>
                                <ul>
                                    <li>Days: <span id="countdown-days">0</span></li>
                                    <li>Hours: <span id="countdown-hours">0</span></li>
                                    <li>Minutes: <span id="countdown-minutes">0</span></li>
                                    <li>Seconds: <span id="countdown-seconds">0</span></li>
                                </ul>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'worldclock':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="worldclock-timezone">Select Timezone</label>
                                <select id="worldclock-timezone" style="width: 100%;">
                                    <option value="UTC">UTC (Coordinated Universal Time)</option>
                                    <option value="GMT">GMT (Greenwich Mean Time)</option>
                                    <option value="EST">EST (Eastern Standard Time)</option>
                                    <option value="PST">PST (Pacific Standard Time)</option>
                                    <option value="CET">CET (Central European Time)</option>
                                    <option value="IST" selected>IST (Indian Standard Time)</option>
                                    <option value="JST">JST (Japan Standard Time)</option>
                                    <option value="AEST">AEST (Australian Eastern Standard Time)</option>
                                </select>
                            </div>
                            <button class="calculate-btn" onclick="updateWorldClock()">Update Time</button>
                        </div>
                        <div class="calculator-result" id="worldclock-result">
                            <h3>World Clock</h3>
                            <div class="result-value" id="worldclock-time">-</div>
                            <div class="result-description">
                                <p>Current date: <span id="worldclock-date">-</span></p>
                                <p>Timezone: <span id="worldclock-tz">-</span></p>
                                <p>UTC offset: <span id="worldclock-offset">-</span></p>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'retirement':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="retirement-age">Current Age</label>
                                <input type="number" id="retirement-age" placeholder="Enter your current age">
                            </div>
                            <div class="form-group">
                                <label for="retirement-target">Retirement Age</label>
                                <input type="number" id="retirement-target" placeholder="Enter target retirement age" value="65">
                            </div>
                            <div class="form-group">
                                <label for="retirement-savings">Current Savings ($)</label>
                                <input type="number" id="retirement-savings" placeholder="Enter current savings">
                            </div>
                            <div class="form-group">
                                <label for="retirement-contribution">Monthly Contribution ($)</label>
                                <input type="number" id="retirement-contribution" placeholder="Enter monthly contribution">
                            </div>
                            <div class="form-group">
                                <label for="retirement-return">Expected Annual Return (%)</label>
                                <input type="number" id="retirement-return" placeholder="Enter expected return" value="7" step="0.1">
                            </div>
                            <button class="calculate-btn" onclick="calculateRetirement()">Calculate Retirement</button>
                        </div>
                        <div class="calculator-result" id="retirement-result">
                            <h3>Retirement Projection</h3>
                            <div class="result-value" id="retirement-value">$0.00</div>
                            <div class="result-description">
                                <p>Years until retirement: <span id="retirement-years">0</span></p>
                                <p>Total contributions: <span id="retirement-totalcontrib">$0.00</span></p>
                                <p>Interest earned: <span id="retirement-interest">$0.00</span></p>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'roi':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="roi-investment">Initial Investment ($)</label>
                                <input type="number" id="roi-investment" placeholder="Enter investment amount">
                            </div>
                            <div class="form-group">
                                <label for="roi-final">Final Value ($)</label>
                                <input type="number" id="roi-final" placeholder="Enter final value">
                            </div>
                            <div class="form-group">
                                <label for="roi-period">Investment Period (years)</label>
                                <input type="number" id="roi-period" placeholder="Enter time period">
                            </div>
                            <button class="calculate-btn" onclick="calculateROI()">Calculate ROI</button>
                        </div>
                        <div class="calculator-result" id="roi-result">
                            <h3>Return on Investment</h3>
                            <div class="result-value" id="roi-value">0%</div>
                            <div class="result-description">
                                <p>Total Return: <span id="roi-total">$0.00</span></p>
                                <p>Annualized ROI: <span id="roi-annualized">0%</span></p>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'cpm':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="cpm-cost">Total Cost ($)</label>
                                <input type="number" id="cpm-cost" placeholder="Enter advertising cost">
                            </div>
                            <div class="form-group">
                                <label for="cpm-impressions">Impressions</label>
                                <input type="number" id="cpm-impressions" placeholder="Enter number of impressions">
                            </div>
                            <button class="calculate-btn" onclick="calculateCPM()">Calculate CPM</button>
                        </div>
                        <div class="calculator-result" id="cpm-result">
                            <h3>Cost Per Mille (CPM)</h3>
                            <div class="result-value" id="cpm-value">$0.00</div>
                            <div class="result-description">
                                <p>CPM is the cost per 1,000 impressions.</p>
                                <p>Industry averages:</p>
                                <ul>
                                    <li>Display ads: $2.80 - $10.00</li>
                                    <li>Facebook ads: $7.19</li>
                                    <li>YouTube ads: $9.68</li>
                                </ul>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'cpc':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="cpc-cost">Total Cost ($)</label>
                                <input type="number" id="cpc-cost" placeholder="Enter advertising cost">
                            </div>
                            <div class="form-group">
                                <label for="cpc-clicks">Clicks</label>
                                <input type="number" id="cpc-clicks" placeholder="Enter number of clicks">
                            </div>
                            <button class="calculate-btn" onclick="calculateCPC()">Calculate CPC</button>
                        </div>
                        <div class="calculator-result" id="cpc-result">
                            <h3>Cost Per Click (CPC)</h3>
                            <div class="result-value" id="cpc-value">$0.00</div>
                            <div class="result-description">
                                <p>CPC is the cost for each click on your ad.</p>
                                <p>Industry averages:</p>
                                <ul>
                                    <li>Google Ads: $1-$2</li>
                                    <li>Facebook Ads: $0.50-$1.50</li>
                                    <li>LinkedIn Ads: $5-$10</li>
                                </ul>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'breakeven':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="breakeven-fixed">Fixed Costs ($)</label>
                                <input type="number" id="breakeven-fixed" placeholder="Enter fixed costs">
                            </div>
                            <div class="form-group">
                                <label for="breakeven-price">Price per Unit ($)</label>
                                <input type="number" id="breakeven-price" placeholder="Enter price per unit">
                            </div>
                            <div class="form-group">
                                <label for="breakeven-variable">Variable Cost per Unit ($)</label>
                                <input type="number" id="breakeven-variable" placeholder="Enter variable cost">
                            </div>
                            <button class="calculate-btn" onclick="calculateBreakeven()">Calculate Break-even</button>
                        </div>
                        <div class="calculator-result" id="breakeven-result">
                            <h3>Break-even Analysis</h3>
                            <div class="result-value" id="breakeven-value">0 units</div>
                            <div class="result-description">
                                <p>Break-even point is when total revenue equals total costs.</p>
                                <p>At break-even:</p>
                                <ul>
                                    <li>Total Revenue: <span id="breakeven-revenue">$0.00</span></li>
                                    <li>Total Costs: <span id="breakeven-totalcosts">$0.00</span></li>
                                </ul>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'invoice':
                    content = `
                        <div class="calculator-form">
                            <div class="form-group">
                                <label for="invoice-from">From (Your Business)</label>
                                <textarea id="invoice-from" rows="3" placeholder="Enter your business name and address"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="invoice-to">To (Client)</label>
                                <textarea id="invoice-to" rows="3" placeholder="Enter client name and address"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="invoice-number">Invoice #</label>
                                <input type="text" id="invoice-number" placeholder="Enter invoice number">
                            </div>
                            <div class="form-group">
                                <label for="invoice-date">Date</label>
                                <input type="date" id="invoice-date">
                            </div>
                            <div class="form-group">
                                <label>Items</label>
                                <div id="invoice-items">
                                    <div class="invoice-item" style="display: flex; gap: 10px; margin-bottom: 10px;">
                                        <input type="text" placeholder="Description" class="invoice-desc" style="flex: 2;">
                                        <input type="number" placeholder="Qty" class="invoice-qty" style="flex: 1;">
                                        <input type="number" placeholder="Price" class="invoice-price" style="flex: 1;">
                                    </div>
                                </div>
                                <button type="button" class="btn-secondary" style="padding: 5px 10px; font-size: 0.9rem;" onclick="addInvoiceItem()">Add Item</button>
                            </div>
                            <div class="form-group">
                                <label for="invoice-tax">Tax Rate (%)</label>
                                <input type="number" id="invoice-tax" placeholder="Enter tax rate" value="0" step="0.1">
                            </div>
                            <button class="calculate-btn" onclick="generateInvoice()">Generate Invoice</button>
                        </div>
                        <div class="calculator-result" id="invoice-result">
                            <h3>Invoice Preview</h3>
                            <div id="invoice-preview" style="background: white; padding: 20px; border-radius: 5px; margin-bottom: 20px;">
                                <!-- Invoice will be generated here -->
                            </div>
                            <button class="btn-secondary" onclick="printInvoice()"><i class="fas fa-print"></i> Print Invoice</button>
                        </div>
                    `;
                    break;
                    
                default:
                    content = `
                        <div class="calculator-form">
                            <h3>${document.getElementById('calculator-title').textContent}</h3>
                            <p>This calculator is ready to use. Enter your details below to perform your calculation.</p>
                            
                            <div class="form-group">
                                <label for="input1">Input Field 1</label>
                                <input type="text" id="input1" placeholder="Enter value">
                            </div>
                            
                            <div class="form-group">
                                <label for="input2">Input Field 2</label>
                                <input type="text" id="input2" placeholder="Enter value">
                            </div>
                            
                            <button class="calculate-btn" onclick="performCalculation()">Calculate</button>
                        </div>
                        <div class="calculator-result" id="default-result">
                            <h3>Calculation Result</h3>
                            <div class="result-value" id="result-value">0</div>
                            <div class="result-description">
                                <p>This is a sample result for demonstration purposes.</p>
                            </div>
                        </div>
                    `;
            }
            
            return content;
        }
        
        // Open legal page modal
        function openLegal(legalType) {
            const modal = document.getElementById('legal-modal');
            const title = document.getElementById('legal-title');
            const content = document.getElementById('legal-content');
            
            const titles = {
                'privacy': 'Privacy Policy',
                'terms': 'Terms of Service',
                'cookies': 'Cookie Policy',
                'disclaimer': 'Disclaimer',
                'gdpr': 'GDPR Compliance'
            };
            
            const descriptions = {
                'privacy': 'This policy outlines how we collect, use, and protect your personal information.',
                'terms': 'These terms govern your use of our website and services.',
                'cookies': 'We use cookies to enhance your browsing experience and analyze site traffic.',
                'disclaimer': 'The information provided by our calculators is for general informational purposes only.',
                'gdpr': 'We comply with the General Data Protection Regulation (GDPR) requirements.'
            };
            
            title.textContent = titles[legalType] || 'Legal Page';
            
            // Generate legal content
            let legalContent = `
                <h3>${titles[legalType]}</h3>
                <p>${descriptions[legalType]}</p>
                
                <h4>Key Points</h4>
                <ul>
                    <li>Your privacy and security are important to us</li>
                    <li>We do not sell your personal information</li>
                    <li>You have the right to access and control your data</li>
                    <li>All calculations are performed locally in your browser</li>
                </ul>
                
                <p>If you have any questions about this policy, please contact us at legal@calchub.com.</p>
            `;
            
            content.innerHTML = legalContent;
            modal.style.display = 'flex';
            return false;
        }
        
        // Close legal modal
        function closeLegal() {
            document.getElementById('legal-modal').style.display = 'none';
        }
        
        // Open resource page
        function openResource(resourceType) {
            const modal = document.getElementById('resource-modal');
            const title = document.getElementById('resource-title');
            const content = document.getElementById('resource-content');
            
            const titles = {
                'blog': 'Blog & Articles',
                'tutorials': 'Tutorials & Guides',
                'help': 'Help Center',
                'requests': 'Calculator Requests',
                'api': 'API Documentation'
            };
            
            const descriptions = {
                'blog': 'Explore our latest articles on financial planning, health tips, and productivity hacks.',
                'tutorials': 'Learn how to get the most out of our calculators with step-by-step guides.',
                'help': 'Find answers to common questions and troubleshooting tips.',
                'requests': 'Suggest new calculators you\'d like to see on our platform.',
                'api': 'Access our API to integrate our calculators into your own applications.'
            };
            
            title.textContent = titles[resourceType] || 'Resource';
            
            // Generate resource content
            let resourceContent = `
                <h3>${titles[resourceType]}</h3>
                <p>${descriptions[resourceType]}</p>
                
                <h4>What You'll Find Here</h4>
                <ul>
                    <li>In-depth articles and guides</li>
                    <li>Video tutorials and walkthroughs</li>
                    <li>Frequently asked questions</li>
                    <li>Developer resources and documentation</li>
                </ul>
                
                <p>This section is currently under development. Check back soon for more content!</p>
            `;
            
            content.innerHTML = resourceContent;
            modal.style.display = 'flex';
            return false;
        }
        
        // Close resource modal
        function closeResourceModal() {
            document.getElementById('resource-modal').style.display = 'none';
        }
        
        // Submit feedback
        function submitFeedback() {
            const name = document.getElementById('feedback-name').value;
            const email = document.getElementById('feedback-email').value;
            const message = document.getElementById('feedback-message').value;
            
            if (name && email && message) {
                alert(`Thank you for your feedback, ${name}! We've received your message and will respond to ${email} shortly.`);
                closeFeedbackModal();
            } else {
                alert('Please fill in all fields');
            }
        }
        
        // Submit issue
        function submitIssue() {
            const name = document.getElementById('issue-name').value;
            const email = document.getElementById('issue-email').value;
            const type = document.getElementById('issue-type').value;
            const description = document.getElementById('issue-description').value;
            
            if (name && email && description) {
                alert(`Thank you for reporting the issue, ${name}! We've received your report (Type: ${type}) and will respond to ${email} shortly.`);
                closeIssueModal();
            } else {
                alert('Please fill in all required fields');
            }
        }
        
        // Calculation functions for all calculators
        function calculateBMI() {
            const height = parseFloat(document.getElementById('height').value) / 100; // Convert to meters
            const weight = parseFloat(document.getElementById('weight').value);
            
            if (height && weight) {
                const bmi = weight / (height * height);
                document.getElementById('bmi-value').textContent = bmi.toFixed(1);
                
                let category = '';
                if (bmi < 18.5) category = 'Underweight';
                else if (bmi < 25) category = 'Normal weight';
                else if (bmi < 30) category = 'Overweight';
                else category = 'Obesity';
                
                document.getElementById('bmi-category').textContent = category;
                document.getElementById('bmi-result').style.display = 'block';
            }
        }
        
        function calculateAge() {
            const birthdate = new Date(document.getElementById('birthdate').value);
            const today = new Date();
            
            if (birthdate && birthdate < today) {
                let years = today.getFullYear() - birthdate.getFullYear();
                let months = today.getMonth() - birthdate.getMonth();
                let days = today.getDate() - birthdate.getDate();
                
                if (days < 0) {
                    months--;
                    days += new Date(today.getFullYear(), today.getMonth(), 0).getDate();
                }
                
                if (months < 0) {
                    years--;
                    months += 12;
                }
                
                document.getElementById('age-value').textContent = `${years} years`;
                
                const totalMonths = years * 12 + months;
                const totalDays = Math.floor((today - birthdate) / (1000 * 60 * 60 * 24));
                const totalWeeks = Math.floor(totalDays / 7);
                
                document.getElementById('age-details').innerHTML = `
                    <p>${months} months, ${days} days</p>
                    <p>${totalMonths} months total</p>
                    <p>${totalWeeks} weeks total</p>
                    <p>${totalDays} days total</p>
                `;
                
                document.getElementById('age-result').style.display = 'block';
            }
        }
        
        function calculateLoan() {
            const amount = parseFloat(document.getElementById('loan-amount').value);
            const rate = parseFloat(document.getElementById('interest-rate').value) / 100 / 12; // Monthly rate
            const term = parseFloat(document.getElementById('loan-term').value) * 12; // Months
            
            if (amount && rate && term) {
                const monthly = (amount * rate * Math.pow(1 + rate, term)) / (Math.pow(1 + rate, term) - 1);
                const total = monthly * term;
                const interest = total - amount;
                
                document.getElementById('monthly-payment').textContent = `$${monthly.toFixed(2)}`;
                document.getElementById('total-payment').textContent = `$${total.toFixed(2)}`;
                document.getElementById('total-interest').textContent = `$${interest.toFixed(2)}`;
                document.getElementById('loan-result').style.display = 'block';
            }
        }
        
        function calculateSleep() {
            const wakeUpTime = document.getElementById('wake-up-time').value;
            const cycles = parseInt(document.getElementById('sleep-cycles').value);
            
            if (wakeUpTime) {
                const [hours, minutes] = wakeUpTime.split(':').map(Number);
                const wakeUpDate = new Date();
                wakeUpDate.setHours(hours, minutes, 0, 0);
                
                // Calculate bedtimes for different sleep cycles (90 minutes each)
                const bedtimes = [];
                for (let i = 1; i <= 6; i++) {
                    const bedtime = new Date(wakeUpDate.getTime() - (i * 90 + 15) * 60000);
                    bedtimes.push(bedtime.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}));
                }
                
                document.getElementById('sleep-time').textContent = bedtimes[cycles-1];
                document.getElementById('sleep-times').innerHTML = `
                    <p>${cycles} cycles (${cycles*1.5} hours): ${bedtimes[cycles-1]}</p>
                    <p>${cycles-1} cycles (${(cycles-1)*1.5} hours): ${bedtimes[cycles-2] || '-'}</p>
                    <p>${cycles+1} cycles (${(cycles+1)*1.5} hours): ${bedtimes[cycles] || '-'}</p>
                `;
                document.getElementById('sleep-result').style.display = 'block';
            }
        }
        
        function calculateBMR() {
            const gender = document.getElementById('bmr-gender').value;
            const age = parseFloat(document.getElementById('bmr-age').value);
            const height = parseFloat(document.getElementById('bmr-height').value);
            const weight = parseFloat(document.getElementById('bmr-weight').value);
            
            if (age && height && weight) {
                let bmr;
                if (gender === 'male') {
                    bmr = 88.362 + (13.397 * weight) + (4.799 * height) - (5.677 * age);
                } else {
                    bmr = 447.593 + (9.247 * weight) + (3.098 * height) - (4.330 * age);
                }
                
                document.getElementById('bmr-value').textContent = Math.round(bmr);
                document.getElementById('bmr-result').style.display = 'block';
            }
        }
        
        function calculateCalorie() {
            const gender = document.getElementById('calorie-gender').value;
            const age = parseFloat(document.getElementById('calorie-age').value);
            const height = parseFloat(document.getElementById('calorie-height').value);
            const weight = parseFloat(document.getElementById('calorie-weight').value);
            const activity = parseFloat(document.getElementById('calorie-activity').value);
            
            if (age && height && weight) {
                let bmr;
                if (gender === 'male') {
                    bmr = 88.362 + (13.397 * weight) + (4.799 * height) - (5.677 * age);
                } else {
                    bmr = 447.593 + (9.247 * weight) + (3.098 * height) - (4.330 * age);
                }
                
                const calories = Math.round(bmr * activity);
                document.getElementById('calorie-value').textContent = calories;
                document.getElementById('calorie-result').style.display = 'block';
            }
        }
        
        function calculateEMI() {
            const amount = parseFloat(document.getElementById('emi-amount').value);
            const rate = parseFloat(document.getElementById('emi-rate').value) / 100 / 12; // Monthly rate
            const term = parseFloat(document.getElementById('emi-term').value); // Months
            
            if (amount && rate && term) {
                const emi = (amount * rate * Math.pow(1 + rate, term)) / (Math.pow(1 + rate, term) - 1);
                const total = emi * term;
                const interest = total - amount;
                
                document.getElementById('emi-value').textContent = `$${emi.toFixed(2)}`;
                document.getElementById('emi-total').textContent = `$${total.toFixed(2)}`;
                document.getElementById('emi-interest').textContent = `$${interest.toFixed(2)}`;
                document.getElementById('emi-result').style.display = 'block';
            }
        }
        
        function calculateInterest() {
            const principal = parseFloat(document.getElementById('interest-principal').value);
            const rate = parseFloat(document.getElementById('interest-rate').value) / 100;
            const time = parseFloat(document.getElementById('interest-time').value);
            const unit = document.getElementById('interest-unit').value;
            const type = document.getElementById('interest-type').value;
            
            if (principal && rate && time) {
                let adjustedTime = time;
                if (unit === 'months') adjustedTime = time / 12;
                if (unit === 'days') adjustedTime = time / 365;
                
                let result, total, earned;
                if (type === 'simple') {
                    earned = principal * rate * adjustedTime;
                    total = principal + earned;
                    result = earned;
                } else {
                    total = principal * Math.pow(1 + rate, adjustedTime);
                    earned = total - principal;
                    result = earned;
                }
                
                document.getElementById('interest-value').textContent = `$${result.toFixed(2)}`;
                document.getElementById('interest-total').textContent = `$${total.toFixed(2)}`;
                document.getElementById('interest-earned').textContent = `$${earned.toFixed(2)}`;
                document.getElementById('interest-result').style.display = 'block';
            }
        }
        
        function calculateSIP() {
            const amount = parseFloat(document.getElementById('sip-amount').value);
            const rate = parseFloat(document.getElementById('sip-rate').value) / 100 / 12; // Monthly rate
            const time = parseFloat(document.getElementById('sip-time').value) * 12; // Months
            
            if (amount && rate && time) {
                const futureValue = amount * ((Math.pow(1 + rate, time) - 1) / rate) * (1 + rate);
                const invested = amount * time;
                const returns = futureValue - invested;
                
                document.getElementById('sip-value').textContent = `$${futureValue.toFixed(2)}`;
                document.getElementById('sip-invested').textContent = `$${invested.toFixed(2)}`;
                document.getElementById('sip-returns').textContent = `$${returns.toFixed(2)}`;
                document.getElementById('sip-total').textContent = `$${futureValue.toFixed(2)}`;
                document.getElementById('sip-result').style.display = 'block';
            }
        }
        
        function calculateTax() {
            const income = parseFloat(document.getElementById('tax-income').value);
            const regime = document.getElementById('tax-regime').value;
            const deductions = parseFloat(document.getElementById('tax-deductions').value) || 0;
            
            if (income) {
                let taxableIncome = income - deductions;
                let tax = 0;
                
                // Simplified tax calculation (India)
                if (regime === 'old') {
                    if (taxableIncome <= 250000) tax = 0;
                    else if (taxableIncome <= 500000) tax = (taxableIncome - 250000) * 0.05;
                    else if (taxableIncome <= 1000000) tax = 12500 + (taxableIncome - 500000) * 0.2;
                    else tax = 112500 + (taxableIncome - 1000000) * 0.3;
                } else {
                    if (taxableIncome <= 250000) tax = 0;
                    else if (taxableIncome <= 500000) tax = (taxableIncome - 250000) * 0.05;
                    else if (taxableIncome <= 750000) tax = 12500 + (taxableIncome - 500000) * 0.1;
                    else if (taxableIncome <= 1000000) tax = 37500 + (taxableIncome - 750000) * 0.15;
                    else if (taxableIncome <= 1250000) tax = 75000 + (taxableIncome - 1000000) * 0.2;
                    else if (taxableIncome <= 1500000) tax = 125000 + (taxableIncome - 1250000) * 0.25;
                    else tax = 187500 + (taxableIncome - 1500000) * 0.3;
                }
                
                const effectiveRate = (tax / income) * 100;
                const netIncome = income - tax;
                
                document.getElementById('tax-value').textContent = `$${tax.toFixed(2)}`;
                document.getElementById('tax-rate').textContent = `${effectiveRate.toFixed(2)}%`;
                document.getElementById('tax-net').textContent = `$${netIncome.toFixed(2)}`;
                document.getElementById('tax-result').style.display = 'block';
            }
        }
        
        function calculateTDEE() {
            const gender = document.getElementById('tdee-gender').value;
            const age = parseFloat(document.getElementById('tdee-age').value);
            const height = parseFloat(document.getElementById('tdee-height').value);
            const weight = parseFloat(document.getElementById('tdee-weight').value);
            const activity = parseFloat(document.getElementById('tdee-activity').value);
            
            if (age && height && weight) {
                let bmr;
                if (gender === 'male') {
                    bmr = 88.362 + (13.397 * weight) + (4.799 * height) - (5.677 * age);
                } else {
                    bmr = 447.593 + (9.247 * weight) + (3.098 * height) - (4.330 * age);
                }
                
                const tdee = Math.round(bmr * activity);
                document.getElementById('tdee-value').textContent = tdee;
                document.getElementById('tdee-result').style.display = 'block';
            }
        }
        
        function calculateHeartRate() {
            const age = parseFloat(document.getElementById('heart-age').value);
            const resting = parseFloat(document.getElementById('heart-resting').value) || 70;
            const intensity = parseFloat(document.getElementById('heart-intensity').value);
            
            if (age) {
                const max = 220 - age;
                const targetMin = Math.round(resting + (max - resting) * intensity);
                const targetMax = Math.round(resting + (max - resting) * (intensity + 0.1));
                
                document.getElementById('heart-max').textContent = max;
                document.getElementById('heart-target').textContent = `${targetMin}-${targetMax}`;
                document.getElementById('heart-result').style.display = 'block';
            }
        }
        
        function calculateBSA() {
            const height = parseFloat(document.getElementById('bsa-height').value);
            const weight = parseFloat(document.getElementById('bsa-weight').value);
            const formula = document.getElementById('bsa-formula').value;
            
            if (height && weight) {
                let bsa;
                switch(formula) {
                    case 'mosteller':
                        bsa = Math.sqrt((height * weight) / 3600);
                        break;
                    case 'dubois':
                        bsa = 0.007184 * Math.pow(height, 0.725) * Math.pow(weight, 0.425);
                        break;
                    case 'haycock':
                        bsa = 0.024265 * Math.pow(height, 0.3964) * Math.pow(weight, 0.5378);
                        break;
                    case 'gehan':
                        bsa = 0.0235 * Math.pow(height, 0.42246) * Math.pow(weight, 0.51456);
                        break;
                    default:
                        bsa = Math.sqrt((height * weight) / 3600);
                }
                
                document.getElementById('bsa-value').textContent = `${bsa.toFixed(2)} m²`;
                document.getElementById('bsa-result').style.display = 'block';
            }
        }
        
        function calculateLeanMass() {
            const gender = document.getElementById('lean-gender').value;
            const weight = parseFloat(document.getElementById('lean-weight').value);
            const bodyfat = parseFloat(document.getElementById('lean-bodyfat').value);
            
            if (weight && bodyfat) {
                const fatMass = weight * (bodyfat / 100);
                const leanMass = weight - fatMass;
                
                document.getElementById('lean-value').textContent = `${leanMass.toFixed(1)} kg`;
                document.getElementById('lean-result').style.display = 'block';
            }
        }
        
        function calculatePregnancy() {
            const lmp = new Date(document.getElementById('pregnancy-lmp').value);
            const cycle = parseFloat(document.getElementById('pregnancy-cycle').value);
            
            if (lmp) {
                // Naegele's rule: Due date = LMP + 1 year - 3 months + 7 days
                const dueDate = new Date(lmp);
                dueDate.setFullYear(dueDate.getFullYear() + 1);
                dueDate.setMonth(dueDate.getMonth() - 3);
                dueDate.setDate(dueDate.getDate() + 7 + (cycle - 28));
                
                // Calculate trimesters
                const trimester1 = new Date(lmp);
                trimester1.setDate(trimester1.getDate() + 13 * 7);
                
                const trimester2 = new Date(trimester1);
                trimester2.setDate(trimester2.getDate() + 13 * 7);
                
                // Current week
                const today = new Date();
                const diffTime = Math.abs(today - lmp);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                const currentWeek = Math.floor(diffDays / 7);
                
                document.getElementById('pregnancy-duedate').textContent = dueDate.toLocaleDateString();
                document.getElementById('pregnancy-trimester1').textContent = trimester1.toLocaleDateString();
                document.getElementById('pregnancy-trimester2').textContent = trimester2.toLocaleDateString();
                document.getElementById('pregnancy-currentweek').textContent = currentWeek;
                document.getElementById('pregnancy-result').style.display = 'block';
            }
        }
        
        function calculatePercentage() {
            const x = parseFloat(document.getElementById('percentage-x').value);
            const y = parseFloat(document.getElementById('percentage-y').value);
            
            if (x && y) {
                const percentage = (x / y) * 100;
                const increase = x * (1 + y/100);
                const decrease = x * (1 - y/100);
                const change = ((y - x) / x) * 100;
                
                document.getElementById('percentage-value').textContent = `${percentage.toFixed(2)}%`;
                document.getElementById('percentage-increase').textContent = increase.toFixed(2);
                document.getElementById('percentage-decrease').textContent = decrease.toFixed(2);
                document.getElementById('percentage-change').textContent = `${change.toFixed(2)}%`;
                document.getElementById('percentage-result').style.display = 'block';
            }
        }
        
        function calculateRatio() {
            const a = parseFloat(document.getElementById('ratio-a').value);
            const b = parseFloat(document.getElementById('ratio-b').value);
            
            if (a && b) {
                // Find greatest common divisor
                const gcd = (x, y) => {
                    while(y) {
                        const t = y;
                        y = x % y;
                        x = t;
                    }
                    return x;
                };
                
                const divisor = gcd(a, b);
                const simplified = `${a/divisor}:${b/divisor}`;
                const percentage = (a / b) * 100;
                
                document.getElementById('ratio-value').textContent = `${a}:${b}`;
                document.getElementById('ratio-simplified').textContent = simplified;
                document.getElementById('ratio-percentage').textContent = `${percentage.toFixed(2)}%`;
                document.getElementById('ratio-result').style.display = 'block';
            }
        }
        
        function calculateFraction() {
            const numerator = parseFloat(document.getElementById('fraction-numerator').value);
            const denominator = parseFloat(document.getElementById('fraction-denominator').value);
            
            if (numerator && denominator) {
                // Find greatest common divisor
                const gcd = (x, y) => {
                    while(y) {
                        const t = y;
                        y = x % y;
                        x = t;
                    }
                    return x;
                };
                
                const divisor = gcd(numerator, denominator);
                const simplified = `${numerator/divisor}/${denominator/divisor}`;
                const decimal = numerator / denominator;
                const percentage = decimal * 100;
                
                document.getElementById('fraction-value').textContent = `${numerator}/${denominator}`;
                document.getElementById('fraction-simplified').textContent = simplified;
                document.getElementById('fraction-decimal').textContent = decimal.toFixed(4);
                document.getElementById('fraction-percentage').textContent = `${percentage.toFixed(2)}%`;
                document.getElementById('fraction-result').style.display = 'block';
            }
        }
        
        function calculateAverage() {
            const values = document.getElementById('average-values').value
                .split(',')
                .map(v => parseFloat(v.trim()))
                .filter(v => !isNaN(v));
            
            if (values.length > 0) {
                // Calculate mean
                const mean = values.reduce((a, b) => a + b, 0) / values.length;
                
                // Calculate median
                const sorted = [...values].sort((a, b) => a - b);
                const mid = Math.floor(sorted.length / 2);
                const median = sorted.length % 2 !== 0 ? sorted[mid] : (sorted[mid - 1] + sorted[mid]) / 2;
                
                // Calculate mode
                const frequency = {};
                let max = 0, mode = [];
                sorted.forEach(v => {
                    frequency[v] = (frequency[v] || 0) + 1;
                    if (frequency[v] > max) {
                        max = frequency[v];
                        mode = [v];
                    } else if (frequency[v] === max) {
                        mode.push(v);
                    }
                });
                const modeText = [...new Set(mode)].join(', ');
                
                // Calculate range
                const range = sorted[sorted.length - 1] - sorted[0];
                
                document.getElementById('average-mean').textContent = mean.toFixed(2);
                document.getElementById('average-median').textContent = median.toFixed(2);
                document.getElementById('average-mode').textContent = modeText || 'No mode';
                document.getElementById('average-range').textContent = range.toFixed(2);
                document.getElementById('average-result').style.display = 'block';
            }
        }
        
        function addGpaCourse() {
            const container = document.getElementById('gpa-courses');
            const newCourse = document.createElement('div');
            newCourse.className = 'gpa-course';
            newCourse.style = "display: flex; gap: 10px; margin-bottom: 10px;";
            newCourse.innerHTML = `
                <input type="text" placeholder="Course name" class="gpa-name" style="flex: 2;">
                <input type="number" placeholder="Credits" class="gpa-credits" style="flex: 1;">
                <select class="gpa-grade" style="flex: 1;">
                    <option value="4">A (4.0)</option>
                    <option value="3.7">A- (3.7)</option>
                    <option value="3.3">B+ (3.3)</option>
                    <option value="3">B (3.0)</option>
                    <option value="2.7">B- (2.7)</option>
                    <option value="2.3">C+ (2.3)</option>
                    <option value="2">C (2.0)</option>
                    <option value="1.7">C- (1.7)</option>
                    <option value="1.3">D+ (1.3)</option>
                    <option value="1">D (1.0)</option>
                    <option value="0">F (0.0)</option>
                </select>
            `;
            container.appendChild(newCourse);
        }
        
        function calculateGPA() {
            const courses = document.querySelectorAll('.gpa-course');
            let totalCredits = 0;
            let totalPoints = 0;
            
            courses.forEach(course => {
                const credits = parseFloat(course.querySelector('.gpa-credits').value) || 0;
                const grade = parseFloat(course.querySelector('.gpa-grade').value) || 0;
                
                totalCredits += credits;
                totalPoints += credits * grade;
            });
            
            if (totalCredits > 0) {
                const gpa = totalPoints / totalCredits;
                
                document.getElementById('gpa-value').textContent = gpa.toFixed(2);
                document.getElementById('gpa-credits').textContent = totalCredits;
                document.getElementById('gpa-points').textContent = totalPoints.toFixed(2);
                document.getElementById('gpa-result').style.display = 'block';
            }
        }
        
        function calculateDateDifference() {
            const start = new Date(document.getElementById('date-start').value);
            const end = new Date(document.getElementById('date-end').value);
            
            if (start && end) {
                const diffTime = Math.abs(end - start);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                const diffWeeks = Math.floor(diffDays / 7);
                
                // Calculate years and months
                let years = end.getFullYear() - start.getFullYear();
                let months = end.getMonth() - start.getMonth();
                
                if (months < 0) {
                    years--;
                    months += 12;
                }
                
                // Adjust for days
                if (end.getDate() < start.getDate()) {
                    months--;
                    if (months < 0) {
                        years--;
                        months += 12;
                    }
                }
                
                document.getElementById('date-difference').textContent = `${diffDays} days`;
                document.getElementById('date-years').textContent = years;
                document.getElementById('date-months').textContent = months;
                document.getElementById('date-weeks').textContent = diffWeeks;
                document.getElementById('date-days').textContent = diffDays;
                document.getElementById('date-result').style.display = 'block';
            }
        }
        
        function calculateDuration() {
            const start = document.getElementById('duration-start').value;
            const end = document.getElementById('duration-end').value;
            
            if (start && end) {
                const [startHours, startMinutes] = start.split(':').map(Number);
                const [endHours, endMinutes] = end.split(':').map(Number);
                
                let diffHours = endHours - startHours;
                let diffMinutes = endMinutes - startMinutes;
                
                if (diffMinutes < 0) {
                    diffHours--;
                    diffMinutes += 60;
                }
                
                if (diffHours < 0) {
                    diffHours += 24;
                }
                
                const totalMinutes = diffHours * 60 + diffMinutes;
                const totalSeconds = totalMinutes * 60;
                const decimalHours = totalMinutes / 60;
                
                document.getElementById('duration-value').textContent = `${diffHours} hours ${diffMinutes} minutes`;
                document.getElementById('duration-minutes').textContent = totalMinutes;
                document.getElementById('duration-seconds').textContent = totalSeconds;
                document.getElementById('duration-decimal').textContent = decimalHours.toFixed(2);
                document.getElementById('duration-result').style.display = 'block';
            }
        }
        
        let countdownInterval;
        function startCountdown() {
            const targetDate = new Date(document.getElementById('countdown-date').value);
            
            if (targetDate) {
                // Clear any existing interval
                if (countdownInterval) clearInterval(countdownInterval);
                
                // Update immediately
                updateCountdown(targetDate);
                
                // Update every second
                countdownInterval = setInterval(() => updateCountdown(targetDate), 1000);
                
                document.getElementById('countdown-result').style.display = 'block';
            }
        }
        
        function updateCountdown(targetDate) {
            const now = new Date();
            const diff = targetDate - now;
            
            if (diff <= 0) {
                document.getElementById('countdown-value').textContent = "00:00:00:00";
                document.getElementById('countdown-days').textContent = "0";
                document.getElementById('countdown-hours').textContent = "0";
                document.getElementById('countdown-minutes').textContent = "0";
                document.getElementById('countdown-seconds').textContent = "0";
                clearInterval(countdownInterval);
                return;
            }
            
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);
            
            document.getElementById('countdown-value').textContent = 
                `${days.toString().padStart(2, '0')}:${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            document.getElementById('countdown-days').textContent = days;
            document.getElementById('countdown-hours').textContent = hours;
            document.getElementById('countdown-minutes').textContent = minutes;
            document.getElementById('countdown-seconds').textContent = seconds;
        }
        
        let worldClockInterval;
        function updateWorldClock() {
            const timezone = document.getElementById('worldclock-timezone').value;
            
            // Clear any existing interval
            if (worldClockInterval) clearInterval(worldClockInterval);
            
            // Update immediately
            displayWorldClock(timezone);
            
            // Update every second
            worldClockInterval = setInterval(() => displayWorldClock(timezone), 1000);
            
            document.getElementById('worldclock-result').style.display = 'block';
        }
        
        function displayWorldClock(timezone) {
            const now = new Date();
            let time, date, offset;
            
            switch(timezone) {
                case 'UTC':
                    time = now.toUTCString().split(' ')[4];
                    date = now.toUTCString().split(' ').slice(0, 4).join(' ');
                    offset = 'UTC±00:00';
                    break;
                case 'GMT':
                    time = now.toLocaleTimeString('en-GB');
                    date = now.toLocaleDateString('en-GB');
                    offset = 'UTC±00:00';
                    break;
                case 'EST':
                    time = now.toLocaleTimeString('en-US', {timeZone: 'America/New_York'});
                    date = now.toLocaleDateString('en-US', {timeZone: 'America/New_York'});
                    offset = 'UTC-05:00';
                    break;
                case 'PST':
                    time = now.toLocaleTimeString('en-US', {timeZone: 'America/Los_Angeles'});
                    date = now.toLocaleDateString('en-US', {timeZone: 'America/Los_Angeles'});
                    offset = 'UTC-08:00';
                    break;
                case 'CET':
                    time = now.toLocaleTimeString('en-GB', {timeZone: 'Europe/Paris'});
                    date = now.toLocaleDateString('en-GB', {timeZone: 'Europe/Paris'});
                    offset = 'UTC+01:00';
                    break;
                case 'IST':
                    time = now.toLocaleTimeString('en-GB', {timeZone: 'Asia/Kolkata'});
                    date = now.toLocaleDateString('en-GB', {timeZone: 'Asia/Kolkata'});
                    offset = 'UTC+05:30';
                    break;
                case 'JST':
                    time = now.toLocaleTimeString('en-GB', {timeZone: 'Asia/Tokyo'});
                    date = now.toLocaleDateString('en-GB', {timeZone: 'Asia/Tokyo'});
                    offset = 'UTC+09:00';
                    break;
                case 'AEST':
                    time = now.toLocaleTimeString('en-GB', {timeZone: 'Australia/Sydney'});
                    date = now.toLocaleDateString('en-GB', {timeZone: 'Australia/Sydney'});
                    offset = 'UTC+10:00';
                    break;
                default:
                    time = now.toLocaleTimeString();
                    date = now.toLocaleDateString();
                    offset = 'Local Time';
            }
            
            document.getElementById('worldclock-time').textContent = time;
            document.getElementById('worldclock-date').textContent = date;
            document.getElementById('worldclock-tz').textContent = timezone;
            document.getElementById('worldclock-offset').textContent = offset;
        }
        
        function calculateRetirement() {
            const age = parseFloat(document.getElementById('retirement-age').value);
            const targetAge = parseFloat(document.getElementById('retirement-target').value);
            const savings = parseFloat(document.getElementById('retirement-savings').value) || 0;
            const contribution = parseFloat(document.getElementById('retirement-contribution').value) || 0;
            const returnRate = parseFloat(document.getElementById('retirement-return').value) / 100;
            
            if (age && targetAge && age < targetAge) {
                const years = targetAge - age;
                const months = years * 12;
                
                let futureValue = savings;
                let totalContributions = savings;
                
                for (let i = 0; i < years; i++) {
                    futureValue = (futureValue + contribution * 12) * (1 + returnRate);
                    totalContributions += contribution * 12;
                }
                
                const interestEarned = futureValue - totalContributions;
                
                document.getElementById('retirement-value').textContent = `$${futureValue.toFixed(2)}`;
                document.getElementById('retirement-years').textContent = years;
                document.getElementById('retirement-totalcontrib').textContent = `$${totalContributions.toFixed(2)}`;
                document.getElementById('retirement-interest').textContent = `$${interestEarned.toFixed(2)}`;
                document.getElementById('retirement-result').style.display = 'block';
            }
        }
        
        function calculateROI() {
            const investment = parseFloat(document.getElementById('roi-investment').value);
            const finalValue = parseFloat(document.getElementById('roi-final').value);
            const period = parseFloat(document.getElementById('roi-period').value);
            
            if (investment && finalValue && period) {
                const totalReturn = finalValue - investment;
                const roi = (totalReturn / investment) * 100;
                const annualized = (Math.pow(1 + roi/100, 1/period) - 1) * 100;
                
                document.getElementById('roi-value').textContent = `${roi.toFixed(2)}%`;
                document.getElementById('roi-total').textContent = `$${totalReturn.toFixed(2)}`;
                document.getElementById('roi-annualized').textContent = `${annualized.toFixed(2)}%`;
                document.getElementById('roi-result').style.display = 'block';
            }
        }
        
        function calculateCPM() {
            const cost = parseFloat(document.getElementById('cpm-cost').value);
            const impressions = parseFloat(document.getElementById('cpm-impressions').value);
            
            if (cost && impressions) {
                const cpm = (cost / impressions) * 1000;
                document.getElementById('cpm-value').textContent = `$${cpm.toFixed(2)}`;
                document.getElementById('cpm-result').style.display = 'block';
            }
        }
        
        function calculateCPC() {
            const cost = parseFloat(document.getElementById('cpc-cost').value);
            const clicks = parseFloat(document.getElementById('cpc-clicks').value);
            
            if (cost && clicks) {
                const cpc = cost / clicks;
                document.getElementById('cpc-value').textContent = `$${cpc.toFixed(2)}`;
                document.getElementById('cpc-result').style.display = 'block';
            }
        }
        
        function calculateBreakeven() {
            const fixed = parseFloat(document.getElementById('breakeven-fixed').value);
            const price = parseFloat(document.getElementById('breakeven-price').value);
            const variable = parseFloat(document.getElementById('breakeven-variable').value);
            
            if (fixed && price && variable) {
                const units = fixed / (price - variable);
                const revenue = units * price;
                const totalCosts = fixed + (variable * units);
                
                document.getElementById('breakeven-value').textContent = `${Math.ceil(units)} units`;
                document.getElementById('breakeven-revenue').textContent = `$${revenue.toFixed(2)}`;
                document.getElementById('breakeven-totalcosts').textContent = `$${totalCosts.toFixed(2)}`;
                document.getElementById('breakeven-result').style.display = 'block';
            }
        }
        
        function addInvoiceItem() {
            const container = document.getElementById('invoice-items');
            const newItem = document.createElement('div');
            newItem.className = 'invoice-item';
            newItem.style = "display: flex; gap: 10px; margin-bottom: 10px;";
            newItem.innerHTML = `
                <input type="text" placeholder="Description" class="invoice-desc" style="flex: 2;">
                <input type="number" placeholder="Qty" class="invoice-qty" style="flex: 1;">
                <input type="number" placeholder="Price" class="invoice-price" style="flex: 1;">
            `;
            container.appendChild(newItem);
        }
        
        function generateInvoice() {
            const from = document.getElementById('invoice-from').value;
            const to = document.getElementById('invoice-to').value;
            const number = document.getElementById('invoice-number').value;
            const date = document.getElementById('invoice-date').value;
            const taxRate = parseFloat(document.getElementById('invoice-tax').value) || 0;
            
            const items = [];
            let subtotal = 0;
            
            document.querySelectorAll('.invoice-item').forEach(item => {
                const desc = item.querySelector('.invoice-desc').value;
                const qty = parseFloat(item.querySelector('.invoice-qty').value) || 0;
                const price = parseFloat(item.querySelector('.invoice-price').value) || 0;
                const total = qty * price;
                
                if (desc && qty && price) {
                    items.push({ desc, qty, price, total });
                    subtotal += total;
                }
            });
            
            const tax = subtotal * (taxRate / 100);
            const total = subtotal + tax;
            
            const invoiceDate = date ? new Date(date).toLocaleDateString() : new Date().toLocaleDateString();
            
            // Generate invoice HTML
            let invoiceHTML = `
                <div style="font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 30px;">
                        <div>
                            <h2 style="color: var(--primary); margin-bottom: 5px;">INVOICE</h2>
                            <p style="margin: 0;"><strong>Invoice #:</strong> ${number || 'N/A'}</p>
                            <p style="margin: 0;"><strong>Date:</strong> ${invoiceDate}</p>
                        </div>
                        <div style="text-align: right;">
                            <h3 style="margin: 0 0 5px 0;">CalcHub</h3>
                            <p style="margin: 0;">${from || 'Your Business Information'}</p>
                        </div>
                    </div>
                    
                    <div style="display: flex; margin-bottom: 30px;">
                        <div style="flex: 1;">
                            <h3 style="margin: 0 0 10px 0;">Bill To:</h3>
                            <p style="margin: 0;">${to || 'Client Information'}</p>
                        </div>
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-bottom: 30px;">
                        <thead>
                            <tr style="background-color: var(--primary); color: white;">
                                <th style="padding: 10px; text-align: left;">Description</th>
                                <th style="padding: 10px; text-align: right;">Qty</th>
                                <th style="padding: 10px; text-align: right;">Price</th>
                                <th style="padding: 10px; text-align: right;">Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${items.map(item => `
                                <tr style="border-bottom: 1px solid #ddd;">
                                    <td style="padding: 10px;">${item.desc}</td>
                                    <td style="padding: 10px; text-align: right;">${item.qty}</td>
                                    <td style="padding: 10px; text-align: right;">$${item.price.toFixed(2)}</td>
                                    <td style="padding: 10px; text-align: right;">$${item.total.toFixed(2)}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                    
                    <div style="display: flex; justify-content: flex-end;">
                        <div style="width: 300px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <span>Subtotal:</span>
                                <span>$${subtotal.toFixed(2)}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <span>Tax (${taxRate}%):</span>
                                <span>$${tax.toFixed(2)}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 1.1em; border-top: 1px solid #ddd; padding-top: 10px;">
                                <span>Total:</span>
                                <span>$${total.toFixed(2)}</span>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 50px; text-align: center; font-size: 0.9em; color: #666;">
                        <p>Thank you for your business!</p>
                        <p>Please make payment within 30 days of receiving this invoice.</p>
                    </div>
                </div>
            `;
            
            document.getElementById('invoice-preview').innerHTML = invoiceHTML;
            document.getElementById('invoice-result').style.display = 'block';
        }
        
        function printInvoice() {
            const printContent = document.getElementById('invoice-preview').innerHTML;
            const originalContent = document.body.innerHTML;
            
            document.body.innerHTML = printContent;
            window.print();
            document.body.innerHTML = originalContent;
            
            // Reinitialize the page
            showHome();
        }
        
        function performCalculation() {
            // For the default calculator template
            const input1 = document.getElementById('input1').value || 0;
            const input2 = document.getElementById('input2').value || 0;
            
            const result = parseFloat(input1) * parseFloat(input2) || 0;
            document.getElementById('result-value').textContent = result;
            document.getElementById('default-result').style.display = 'block';
        }
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', () => {
            // Close calculator if open
            showHome();
        });
    </script>
</body>
</html>